{"ast":null,"code":"import { profileAPI, usersAPI } from \"../api/api\";\nconst ADD_POST = \"ADD-POST\";\nconst SET_USER_PROFILE = \"SET-USER-PROFILE\";\nconst SET_USER_STATUS = \"SET-USER-STATUS\";\nconst DELETE_POST = \"DELETE-POST\";\nlet initialState = {\n  posts: [{\n    id: 1,\n    message: \"My first post\",\n    likesCount: 0\n  }, {\n    id: 2,\n    message: \"Second post\",\n    likesCount: 2\n  }, {\n    id: 3,\n    message: \"My third post\",\n    likesCount: 5\n  }],\n  profile: null,\n  status: \"\"\n};\n\nconst profileReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_POST:\n      {\n        return { ...state,\n          posts: [...state.posts, {\n            id: 5,\n            message: action.newPostText,\n            likesCount: 0\n          }]\n        };\n      }\n\n    case SET_USER_PROFILE:\n      {\n        return { ...state,\n          profile: action.profile\n        };\n      }\n\n    case SET_USER_STATUS:\n      {\n        return { ...state,\n          status: action.status\n        };\n      }\n\n    case DELETE_POST:\n      {\n        return { ...state,\n          posts: state.posts.filter(p => p.id != action.postId)\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\nexport default profileReducer; // action creators\n\nexport const addPostCreator = newPostText => ({\n  type: ADD_POST,\n  newPostText\n});\nexport const setUserProfile = profile => ({\n  type: SET_USER_PROFILE,\n  profile\n});\nexport const setUserStatus = status => ({\n  type: SET_USER_STATUS,\n  status\n});\nexport const deletePost = postId => ({\n  type: DELETE_POST,\n  postId\n}); // thunks\n\nexport const getUserProfile = userId => async dispatch => {\n  let response = await usersAPI.getProfile(userId);\n  dispatch(setUserProfile(response.data));\n};\nexport const getUserStatus = userId => async dispatch => {\n  let response = await profileAPI.getStatus(userId);\n\n  if (response.data) {\n    dispatch(setUserStatus(response.data));\n  }\n};\nexport const updateUserStatus = status => async dispatch => {\n  let response = await profileAPI.updateStatus(status).then(response => {\n    if (response.data.resultCode === 0) {\n      dispatch(setUserStatus(status));\n    }\n  });\n};","map":{"version":3,"sources":["E:/repositories/react-social/src/redux/profile-reducer.js"],"names":["profileAPI","usersAPI","ADD_POST","SET_USER_PROFILE","SET_USER_STATUS","DELETE_POST","initialState","posts","id","message","likesCount","profile","status","profileReducer","state","action","type","newPostText","filter","p","postId","addPostCreator","setUserProfile","setUserStatus","deletePost","getUserProfile","userId","dispatch","response","getProfile","data","getUserStatus","getStatus","updateUserStatus","updateStatus","then","resultCode"],"mappings":"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","sourcesContent":["import { profileAPI, usersAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst SET_USER_PROFILE = \"SET-USER-PROFILE\";\r\nconst SET_USER_STATUS = \"SET-USER-STATUS\";\r\nconst DELETE_POST = \"DELETE-POST\";\r\n\r\nlet initialState = {\r\n  posts: [\r\n    { id: 1, message: \"My first post\", likesCount: 0 },\r\n    { id: 2, message: \"Second post\", likesCount: 2 },\r\n    { id: 3, message: \"My third post\", likesCount: 5 },\r\n  ],\r\n  profile: null,\r\n  status: \"\",\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      return {\r\n        ...state,\r\n        posts: [\r\n          ...state.posts,\r\n          {\r\n            id: 5,\r\n            message: action.newPostText,\r\n            likesCount: 0,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    case SET_USER_PROFILE: {\r\n      return {\r\n        ...state,\r\n        profile: action.profile,\r\n      };\r\n    }\r\n    case SET_USER_STATUS: {\r\n      return {\r\n        ...state,\r\n        status: action.status,\r\n      };\r\n    }\r\n    case DELETE_POST: {\r\n      return {\r\n        ...state,\r\n        posts: state.posts.filter((p) => p.id != action.postId),\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nexport default profileReducer;\r\n\r\n// action creators\r\nexport const addPostCreator = (newPostText) => ({\r\n  type: ADD_POST,\r\n  newPostText,\r\n});\r\n\r\nexport const setUserProfile = (profile) => ({\r\n  type: SET_USER_PROFILE,\r\n  profile,\r\n});\r\n\r\nexport const setUserStatus = (status) => ({\r\n  type: SET_USER_STATUS,\r\n  status,\r\n});\r\n\r\nexport const deletePost = (postId) => ({\r\n  type: DELETE_POST,\r\n  postId,\r\n});\r\n\r\n// thunks\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n  let response = await usersAPI.getProfile(userId);\r\n  dispatch(setUserProfile(response.data));\r\n};\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n  let response = await profileAPI.getStatus(userId);\r\n  if (response.data) {\r\n    dispatch(setUserStatus(response.data));\r\n  }\r\n};\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n  let response = await profileAPI.updateStatus(status).then((response) => {\r\n    if (response.data.resultCode === 0) {\r\n      dispatch(setUserStatus(status));\r\n    }\r\n  });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}