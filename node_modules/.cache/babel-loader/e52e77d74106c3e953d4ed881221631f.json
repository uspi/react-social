{"ast":null,"code":"import _regeneratorRuntime from\"E:/repositories/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/repositories/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"E:/repositories/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"E:/repositories/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{profileAPI,usersAPI}from\"../api/api\";var ADD_POST=\"ADD-POST\";var SET_USER_PROFILE=\"SET-USER-PROFILE\";var SET_USER_STATUS=\"SET-USER-STATUS\";var DELETE_POST=\"DELETE-POST\";var initialState={posts:[{id:1,message:\"My first post\",likesCount:0},{id:2,message:\"Second post\",likesCount:2},{id:3,message:\"My third post\",likesCount:5}],profile:null,status:\"\"};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[{id:5,message:action.newPostText,likesCount:0}])});}case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_USER_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case DELETE_POST:{return _objectSpread(_objectSpread({},state),{},{posts:state.posts.filter(function(p){return p.id!==action.postId;})});}default:{return state;}}};export default profileReducer;// action creators\nexport var addPostCreator=function addPostCreator(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setUserStatus=function setUserStatus(status){return{type:SET_USER_STATUS,status:status};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};// thunks\nexport var getUserProfile=function getUserProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return usersAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUserProfile(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getUserStatus=function getUserStatus(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;if(response.data){dispatch(setUserStatus(response.data));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateUserStatus=function updateUserStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setUserStatus(status));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["E:/repositories/react-social/src/redux/profile-reducer.js"],"names":["profileAPI","usersAPI","ADD_POST","SET_USER_PROFILE","SET_USER_STATUS","DELETE_POST","initialState","posts","id","message","likesCount","profile","status","profileReducer","state","action","type","newPostText","filter","p","postId","addPostCreator","setUserProfile","setUserStatus","deletePost","getUserProfile","userId","dispatch","getProfile","response","data","getUserStatus","getStatus","updateUserStatus","updateStatus","resultCode"],"mappings":"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","sourcesContent":["import { profileAPI, usersAPI } from \"../api/api\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst SET_USER_PROFILE = \"SET-USER-PROFILE\";\r\nconst SET_USER_STATUS = \"SET-USER-STATUS\";\r\nconst DELETE_POST = \"DELETE-POST\";\r\n\r\nlet initialState = {\r\n  posts: [\r\n    { id: 1, message: \"My first post\", likesCount: 0 },\r\n    { id: 2, message: \"Second post\", likesCount: 2 },\r\n    { id: 3, message: \"My third post\", likesCount: 5 },\r\n  ],\r\n  profile: null,\r\n  status: \"\",\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      return {\r\n        ...state,\r\n        posts: [\r\n          ...state.posts,\r\n          {\r\n            id: 5,\r\n            message: action.newPostText,\r\n            likesCount: 0,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    case SET_USER_PROFILE: {\r\n      return {\r\n        ...state,\r\n        profile: action.profile,\r\n      };\r\n    }\r\n    case SET_USER_STATUS: {\r\n      return {\r\n        ...state,\r\n        status: action.status,\r\n      };\r\n    }\r\n    case DELETE_POST: {\r\n      return {\r\n        ...state,\r\n        posts: state.posts.filter((p) => p.id !== action.postId),\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nexport default profileReducer;\r\n\r\n// action creators\r\nexport const addPostCreator = (newPostText) => ({\r\n  type: ADD_POST,\r\n  newPostText,\r\n});\r\n\r\nexport const setUserProfile = (profile) => ({\r\n  type: SET_USER_PROFILE,\r\n  profile,\r\n});\r\n\r\nexport const setUserStatus = (status) => ({\r\n  type: SET_USER_STATUS,\r\n  status,\r\n});\r\n\r\nexport const deletePost = (postId) => ({\r\n  type: DELETE_POST,\r\n  postId,\r\n});\r\n\r\n// thunks\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n  let response = await usersAPI.getProfile(userId);\r\n  dispatch(setUserProfile(response.data));\r\n};\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n  let response = await profileAPI.getStatus(userId);\r\n  if (response.data) {\r\n    dispatch(setUserStatus(response.data));\r\n  }\r\n};\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n  let response = await profileAPI.updateStatus(status);\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(setUserStatus(status));\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}